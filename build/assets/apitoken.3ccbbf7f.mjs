import{ref as P,onMounted as S,mergeProps as V,withCtx as l,createTextVNode as c,unref as n,createVNode as f,useSSRContext as C}from"vue";import{ssrRenderAttrs as R,ssrRenderList as N,ssrInterpolate as U,ssrRenderComponent as i}from"vue/server-renderer";import{useForm as G}from"@inertiajs/inertia-vue3";import j from"./Ago.4c06185a.mjs";import v from"./InputError.fa7718ad.mjs";import x from"./InputLabel.63f297b0.mjs";import{_ as D}from"./DangerButton.f1676f49.mjs";import T from"./PrimaryButton.f2313b5d.mjs";import b from"./TextInput.46a15c42.mjs";import E from"./FormSection.15d8c0bc.mjs";import"moment";import"./_plugin-vue_export-helper.43be4956.mjs";import"./SectionTitle.2005f81b.mjs";const w={__name:"apitoken",__ssrInlineRender:!0,setup(_){const m=P([]),t=G({token_name:null}),I=()=>{t.post(route("settings.api-tokens.store"),{errorBag:"generateToken",preserveScroll:!0,onSuccess:()=>p()})};function p(){axios.get("/currentusers/tokens").then(u=>{m.value=u.data})}function $(u){axios.delete(route("settings.api-tokens.delete",{id:u})).then(s=>{p()})}return S(()=>{p()}),(u,s,k,A)=>{s(`<section${R(V({"aria-labelledby":"api_token_settings_heading",class:"mt-6"},A))}>`),m.value.length!=0?(s('<div><div class="my-2 mb-4"><h2 id="api_token_settings_heading" class="text-lg leading-6 font-medium text-gray-900"> API Tokens </h2></div><div class="shadow sm:rounded-md sm:overflow-hidden"><div class="bg-white py-6 px-4 space-y-6 sm:p-6"><ul class="space-y-3"><!--[-->'),N(m.value,r=>{s(`<li class="md:flex justify-between md:space-x-2"><div><span class="block font-bold">${U(r.name)}</span>`),r.created_at?s(i(j,{datess:r.created_at,classes:" text-xs  text-gray-300",befor:""},null,k)):s("<!---->"),s("</div>"),s(i(D,{onClick:e=>$(r.id)},{default:l((e,o,a,d)=>{if(o)o(" Delete Token ");else return[c(" Delete Token ")]}),_:2},k)),s("</li>")}),s("<!--]--></ul><div></div></div></div></div>")):s("<!---->"),s(i(E,{onSubmitted:I},{title:l((r,e,o,a)=>{if(e)e(" API Tokens ");else return[c(" API Tokens ")]}),description:l((r,e,o,a)=>{if(e)e(" Create API tokens to access your account over our REST API. ");else return[c(" Create API tokens to access your account over our REST API. ")]}),form:l((r,e,o,a)=>{if(e)e(`<div class="col-span-6 sm:col-span-4"${a}>`),e(i(x,{for:"token_name",value:"Token name"},null,o,a)),e(i(b,{id:"token_name",modelValue:n(t).token_name,"onUpdate:modelValue":d=>n(t).token_name=d,type:"text",class:"mt-1 block w-full"},null,o,a)),e(i(v,{message:n(t).errors.token_name,class:"mt-2"},null,o,a)),e("</div>");else return[f("div",{class:"col-span-6 sm:col-span-4"},[f(x,{for:"token_name",value:"Token name"}),f(b,{id:"token_name",modelValue:n(t).token_name,"onUpdate:modelValue":d=>n(t).token_name=d,type:"text",class:"mt-1 block w-full"},null,8,["modelValue","onUpdate:modelValue"]),f(v,{message:n(t).errors.token_name,class:"mt-2"},null,8,["message"])])]}),actions:l((r,e,o,a)=>{if(e)e(i(T,{class:{"opacity-25":n(t).processing},disabled:n(t).processing},{default:l((d,g,B,F)=>{if(g)g(" Generate New Token ");else return[c(" Generate New Token ")]}),_:1},o,a));else return[f(T,{class:{"opacity-25":n(t).processing},disabled:n(t).processing},{default:l(()=>[c(" Generate New Token ")]),_:1},8,["class","disabled"])]}),_:1},k)),s("</section>")}}},y=w.setup;w.setup=(_,m)=>{const t=C();return(t.modules||(t.modules=new Set)).add("resources/js/Pages/User/patials/apitoken.vue"),y?y(_,m):void 0};export{w as default};
