import{o as d,f,k as t,e as x,U as v,m as Y,a2 as G,j as y,n as $,i as p,s as c,u as a,D as k,z as D,q as K,t as Q,F as R,x as W,$ as X,a0 as Z}from"./vendor.ab963d2a.js";import{_ as ee}from"./AdminLayout.ef1e796c.js";import B from"./DirectoryNav.00706737.js";import{r as te,a as S,_ as oe,b as se,c as ne,d as re,e as le,g as ie}from"./SimpleModal.f56c92ff.js";import ae from"./DeleteModal.dfa11efe.js";import de from"./InputModal.8222516b.js";import{r as ue,P as ce}from"./PreviewModal.c132df90.js";import{_ as pe}from"./_plugin-vue_export-helper.cdc0426e.js";import"./app.5b96fbb3.js";import"./useDetictingMobile.ab43061e.js";import"./settings.ba59d097.js";import"./usermenu.0acaf69c.js";import"./dialog.97b945f7.js";import"./dom.7db5f4cf.js";import"./hidden.cc743816.js";import"./micro-task.fe338338.js";import"./open-closed.ec16d171.js";import"./use-outside-click.52110303.js";import"./transition.a6e787c7.js";import"./Input.f80ea944.js";import"./Label.447fc42a.js";import"./InputError.a2e9d05f.js";import"./Select.da4d29d5.js";function ge(b,M){return d(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99"})])}const N=b=>(X("data-v-549ede6e"),b=b(),Z(),b),fe={class:"p-6 bg-gray-200 h-screen"},me={class:"bg-white max-h-screen rounded-lg shadow-lg relative p-4"},he={key:0,class:"absolute left-0 top-0 w-full h-full z-10"},be=N(()=>t("div",{class:"bg-gray-400 bg-opacity-30 grid content-center justify-center h-full"},[t("div",{class:"inline"},[t("svg",{class:"animate-spin h-7 w-7 text-green-300",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})])])],-1)),ve=[be],ye={class:"col-span-1 md:col-span-3 lg:col-span-4 sticky"},we={class:"flex justify-between pb-3 border-b-2"},_e={class:"space-x-2"},xe={class:"pb-3 lg:pr-3 lg:pb-0 lg:h-full overflow-y-auto"},ke={class:"ml-5 mt-1"},Ce=["disabled"],Fe=["disabled"],$e={class:"space-x-2 flex"},Me=N(()=>t("span",{class:"mt-0.5 text-xs lg:text-md pr-1"},"Deselect",-1)),Ie={class:"flex mt-2"},De={class:"sm:w-2/12 hidden md:block"},Be={class:"pb-3 lg:pr-3 lg:pb-0 lg:h-full overflow-y-auto"},Se={class:"ml-5 mt-1"},Ne={class:"sm:w-10/12"},ze={class:"grid grid-cols-4 sm:grid-cols-12 gap-3 overscroll-x-contain"},Ue=["onClick"],je={key:0,class:"absolute top-1 right-1 border border-green-500 bg-white text-green-500 rounded-full z-10 cursor-pointer"},Pe={key:1,class:"absolute top-0 right-0 w-full h-full bg-gray-50 cursor-pointer bg-opacity-50 flex items-center justify-center p-2"},Ve={class:"text-xs font-bold break-all text-center"},Le=["for"],He=["src","alt"],Te={key:1,class:"col-span-10 p-3"},qe={__name:"Libary",props:{openFileManager:{type:Boolean,default:!0},multiple:{type:Boolean,default:!0}},setup(b){const M=b,I=x(null),m=x(!0);var n=v([]);const l=x(""),r=v({open:!1,header:"",body:"",callback:null}),u=v({open:!1,header:"",body:"",confirm:""});x(!1);const i=v({images:[],path:"",settings:[],progress:null}),w=v({open:!1}),z=x(null),g=v({directories:[],files:[]}),U=s=>{n.includes(s)?P(s):j(s)},j=s=>{n.push(s)},P=s=>{n.splice(n.findIndex(e=>e===s),1)};Y(()=>{h()});function h(){let s={path:l.value};axios.post(route("laravel-file-manager.setup"),s).then(e=>{g.directories=e.data.directories,g.files=e.data.files.sort(function(o,_){return _.time-o.time}),m.value=!1})}function F(s){return n.length?n.includes(s):!1}function C(s){m.value=!0,l.value=s,n.splice(0),h()}function V(){u.open=!0,u.header="Create New Folder?",u.body=`you are creating new folder in "home/${l.value}".
                      type your new folder name and click the "Create Folder" button.`,u.confirm="Create Folder"}function L(s){m.value=!0,u.open=!1;let e={name:s,path:l.value};axios.post(route("laravel-file-manager.create-folder"),e).then(o=>{n.splice(0),h()})}function H(){r.open=!0,r.header="Delete Image(s)?",r.body=`you are deleting ${n.length} image(s). are you sure?`,r.callback=T}function T(){m.value=!0,r.open=!1;let s={images:n};axios.post(route("laravel-file-manager.delete-images"),s).then(e=>{n.splice(0),h()})}function q(){r.open=!0,r.header="Delete Folder?",r.body=`you are deleting "${l.value}" folder. are you sure?`,r.callback=A}function A(){m.value=!0,r.open=!1;let s={folder:l.value};axios.post(route("laravel-file-manager.delete-folder"),s).then(e=>{n.splice(0),l.value="",h()})}function E(){I.value.click()}function J(s){let e=s.target.files;if(e.length){let o=[];for(let _=0;_<e.length;_++)o.push({name:null,format:null});i.images=e,i.settings=o,w.open=!0}}function O(){m.value=!0;let s=new FormData;for(let e=0;e<i.images.length;e++)s.append(`images[${e}]`,i.images[e]);s.append("path",l.value),s.append("settings",JSON.stringify(i.settings)),axios.post(route("laravel-file-manager.upload-images"),s,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){i.progress={percentage:Math.round(100*e.loaded/e.total)}}}).then(e=>{w.open=!1,n.splice(0),i.images=[],i.path="",i.settings=[],i.progress=null,h()})}return G(function s(e){M.multiple==!1&&e.length>1&&(s=[e.at(-1)])}),(s,e)=>(d(),y(ee,{title:"Category"},{default:$(()=>[t("div",fe,[t("div",me,[m.value?(d(),f("div",he,ve)):p("",!0),t("div",ye,[t("div",we,[t("div",_e,[c(oe,{buttonclas:"buttonclas"},{openbutton:$(()=>[c(a(te),{class:"h-4 w-4 lg:h-5 lg:w-5","aria-hidden":"true"})]),default:$(()=>[t("div",xe,[t("button",{class:k(["inline-flex w-full px-2 pt-1",[l.value==""?"bg-gray-200 rounded":null]]),onClick:e[0]||(e[0]=o=>C(""))},[c(a(S),{class:"h-5 w-5","aria-hidden":"true"}),D(" Home ")],2),t("div",ke,[g.directories.length?(d(),y(B,{key:0,directories:g.directories,current:l.value,"onChange:directory":e[1]||(e[1]=o=>C(o))},null,8,["directories","current"])):p("",!0)])])]),_:1}),t("button",{type:"button",class:"inline-flex items-center p-1.5 lg:p-2 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:V,title:"create new folder"},[c(a(se),{class:"h-4 w-4 lg:h-5 lg:w-5","aria-hidden":"true"})]),t("button",{type:"button",class:k(["inline-flex items-center p-1.5 lg:p-2 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",[l.value==""?"opacity-50 cursor-not-allowed":null]]),title:"remove folder",disabled:l.value=="",onClick:q},[c(a(ne),{class:"h-4 w-4 lg:h-5 lg:w-5","aria-hidden":"true"})],10,Ce),t("button",{type:"button",class:"inline-flex items-center p-1.5 lg:p-2 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",title:"upload image(s)",onClick:E,ref_key:"uploadBtn",ref:z},[c(a(ue),{class:"h-4 w-4 lg:h-5 lg:w-5","aria-hidden":"true"})],512),t("button",{type:"button",class:k(["inline-flex items-center p-1.5 lg:p-2 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-md text-white focus:outline-none focus:ring-2 bg-indigo-600 hover:bg-indigo-700 focus:ring-offset-2 focus:ring-indigo-500",[a(n).length?null:"opacity-50 cursor-not-allowed"]]),disabled:!a(n).length,onClick:H,title:"delete image(s)"},[c(a(re),{class:"h-4 w-4 lg:h-5 lg:w-5","aria-hidden":"true"})],10,Fe)]),t("div",$e,[a(n).length?(d(),f("button",{key:0,type:"button",class:"inline-flex items-center self-center p-1.5 lg:p-2 border-transparent shadow-sm text-sm leading-4 font-medium rounded border text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",onClick:e[2]||(e[2]=o=>a(n).splice(0)),title:"select"},[c(a(le),{class:"mr-1 lg:mr-2 h-4 w-4 lg:h-5 lg:w-5","aria-hidden":"true"}),Me])):p("",!0),t("button",{type:"button",class:"inline-flex items-center p-1.5 lg:p-2 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-md text-gray-400 bg-gray-100 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 focus:text-green-500 focus:bg-green-100",onClick:e[3]||(e[3]=o=>h())},[c(a(ge),{class:"h-4 w-4 lg:h-5 lg:w-5","aria-hidden":"true"})])])])]),t("div",Ie,[t("div",De,[t("div",Be,[t("button",{class:k(["inline-flex w-full px-2 pt-1",[l.value==""?"bg-gray-200 rounded":null]]),onClick:e[4]||(e[4]=o=>C(""))},[c(a(S),{class:"h-5 w-5","aria-hidden":"true"}),D(" Home ")],2),t("div",Se,[g.directories.length?(d(),y(B,{key:0,directories:g.directories,current:l.value,"onChange:directory":e[5]||(e[5]=o=>C(o))},null,8,["directories","current"])):p("",!0)])])]),t("div",Ne,[t("div",ze,[g.files.length?(d(!0),f(R,{key:0},K(g.files,o=>(d(),f("div",{class:"col-span-2 h-full overscroll-auto",key:o.name},[t("div",{class:k(["p-2 border-2 rounded relative bg-white transition-all h-full flex cursor-pointer",[F(o.url)?"selected-inner-shadow border-green-500":null]]),onClick:_=>U(o.url)},[F(o.url)?(d(),f("div",je,[c(a(ie),{class:"w-6 h-6"})])):p("",!0),F(o.url)?(d(),f("div",Pe,[t("p",Ve,Q(o.name),1)])):p("",!0),t("label",{for:o.name,class:"self-center"},[t("img",{src:o.url,alt:o.name,class:"w-full cursor-pointer"},null,8,He)],8,Le)],10,Ue)]))),128)):(d(),f("div",Te,"This folder is empty..."))])])])])]),r.open?(d(),y(ae,{key:0,"open-modal":r.open,"onUpdate:open-modal":e[6]||(e[6]=o=>r.open=o),"onClick:confirm":r.callback,header:r.header,body:r.body,confirm:"Yes , Delete"},null,8,["open-modal","onClick:confirm","header","body"])):p("",!0),u.open?(d(),y(de,{key:1,"open-modal":u.open,"onUpdate:open-modal":e[7]||(e[7]=o=>u.open=o),header:u.header,body:u.body,confirm:u.confirm,"onClick:confirm":e[8]||(e[8]=o=>L(o))},null,8,["open-modal","header","body","confirm"])):p("",!0),t("form",{action:"",onSubmit:e[9]||(e[9]=W(()=>{},["prevent"])),class:"hidden"},[t("input",{type:"file",multiple:"",name:"images",onChange:J,accept:"image/*",ref_key:"uploadImagesInput",ref:I},null,544)],32),w.open?(d(),y(ce,{key:2,"open-modal":w.open,"onUpdate:open-modal":e[10]||(e[10]=o=>w.open=o),settings:i.settings,"onUpdate:settings":e[11]||(e[11]=o=>i.settings=o),progress:i.progress,"onClick:upload":O,images:i.images},null,8,["open-modal","settings","progress","images"])):p("",!0)]),_:1}))}},ct=pe(qe,[["__scopeId","data-v-549ede6e"]]);export{ct as default};
