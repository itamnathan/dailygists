import{H as X,a1 as Z,e as C,U as v,m as ee,a2 as te,o as c,j as y,n as w,u as l,s as r,k as t,f,i as p,D as x,z as se,x as N,q as oe,t as le,F as ne,$ as ae,a0 as re}from"./vendor.ab963d2a.js";import B from"./DirectoryNav.00706737.js";import ie from"./DeleteModal.dfa11efe.js";import de from"./InputModal.8222516b.js";import{r as ce,P as ue}from"./PreviewModal.c132df90.js";import{_ as pe,r as ge,a as z,b as fe,c as me,d as he,e as j,f as be,g as ve}from"./SimpleModal.f56c92ff.js";import{_ as ye}from"./_plugin-vue_export-helper.cdc0426e.js";import{f as we,o as V}from"./transition.a6e787c7.js";import{V as xe,N as _e}from"./dialog.97b945f7.js";const ke=X("media",{state:()=>({selectedmedias:[],content:{}}),getters:{},actions:{}});const F=h=>(ae("data-v-49bcbfe2"),h=h(),re(),h),Ce={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Fe=F(()=>t("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"\u200B",-1)),Me={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-5xl w-full"},$e={key:0,class:"absolute left-0 top-0 w-full h-full z-[90]"},Ie=F(()=>t("div",{class:"bg-gray-400 bg-opacity-30 grid content-center justify-center h-full"},[t("div",{class:"inline"},[t("svg",{class:"animate-spin h-7 w-7 text-green-300",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})])])],-1)),Se=[Ie],De={class:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 py-4 px-4 gap-3"},Ne={class:"col-span-1 md:col-span-3 lg:col-span-4"},Be={class:"flex justify-between pb-3 border-b-2"},ze={class:"space-x-2"},je={class:"pb-3 lg:pr-3 lg:pb-0 lg:h-full overflow-y-auto"},Ve={class:"ml-5 mt-1"},Pe=["disabled"],Ue=["disabled"],Te={class:"space-x-2 flex"},He={class:"sm:flex grid sm:space-x-2 space-y-2 md:space-y-0"},Oe=F(()=>t("span",{class:"mt-0.5 text-xs lg:text-md pr-1"},"Deselect",-1)),qe=F(()=>t("span",{class:"mt-0.5 text-xs lg:text-md pr-1"},"Select",-1)),Ae={class:"col-span-1 hidden md:block"},Ee={class:"pb-3 border-b-2 lg:pr-3 lg:pb-0 lg:border-r-2 lg:border-b-0 lg:h-full overflow-y-auto"},Je=F(()=>t("span",{class:"mx-1"},"Home",-1)),Le={class:"ml-5 mt-1"},Re={class:"col-span-1 md:col-span-2 lg:col-span-3"},Ye={class:"grid grid-cols-4 sm:grid-cols-6 lg:grid-cols-10 gap-3"},Ge=["onClick"],Ke={key:0,class:"absolute top-1 right-1 border border-green-500 bg-white text-green-500 rounded-full z-10 cursor-pointer"},Qe={key:1,class:"absolute top-0 right-0 w-full h-full bg-gray-50 cursor-pointer bg-opacity-50 flex items-center justify-center p-2"},We={class:"text-xs font-bold break-all text-center"},Xe=["for"],Ze=["src","alt"],et={key:1,class:"col-span-10 p-3"},tt={__name:"FileManager",props:{openFileManager:{type:Boolean,default:!1},multiple:{type:Boolean,default:!0}},emits:["update:openFileManager","update:selectedImages"],setup(h,{emit:I}){const P=h,U=ke(),{selectedmedias:T}=Z(U),S=C(null),m=C(!0);var n=v([]);const i=C(""),a=v({open:!1,header:"",body:"",callback:null});function H(o){I("update:selectedImages",o),I("update:openFileManager",!1)}const u=v({open:!1,header:"",body:"",confirm:""});C(!1);const d=v({images:[],path:"",settings:[],progress:null}),_=v({open:!1}),D=C(null),g=v({directories:[],files:[]});function b(){let o={path:i.value};axios.post(route("laravel-file-manager.setup"),o).then(e=>{g.directories=e.data.directories,g.files=e.data.files.sort(function(s,k){return k.time-s.time}),m.value=!1})}function $(o){return n.length?n.includes(o):!1}function M(o){m.value=!0,i.value=o,n.splice(0),b()}function O(){u.open=!0,u.header="Create New Folder?",u.body=`you are creating new folder in "home/${i.value}".
                      type your new folder name and click the "Create Folder" button.`,u.confirm="Create Folder"}function q(o){m.value=!0,u.open=!1;let e={name:o,path:i.value};axios.post(route("laravel-file-manager.create-folder"),e).then(s=>{n.splice(0),b()})}function A(){a.open=!0,a.header="Delete Image(s)?",a.body=`you are deleting ${n.length} image(s). are you sure?`,a.callback=E}function E(){m.value=!0,a.open=!1;let o={images:n};axios.post(route("laravel-file-manager.delete-images"),o).then(e=>{n.splice(0),b()})}function J(){a.open=!0,a.header="Delete Folder?",a.body=`you are deleting "${i.value}" folder. are you sure?`,a.callback=L}function L(){m.value=!0,a.open=!1;let o={folder:i.value};axios.post(route("laravel-file-manager.delete-folder"),o).then(e=>{n.splice(0),i.value="",b()})}function R(){S.value.click()}function Y(o){let e=o.target.files;if(e.length){let s=[];for(let k=0;k<e.length;k++)s.push({name:null,format:null});d.images=e,d.settings=s,_.open=!0}}function G(){m.value=!0;let o=new FormData;for(let e=0;e<d.images.length;e++)o.append(`images[${e}]`,d.images[e]);o.append("path",i.value),o.append("settings",JSON.stringify(d.settings)),axios.post(route("laravel-file-manager.upload-images"),o,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){d.progress={percentage:Math.round(100*e.loaded/e.total)}}}).then(e=>{_.open=!1,n.splice(0),d.images=[],d.path="",d.settings=[],d.progress=null,b()})}const K=o=>{n.includes(o)?W(o):Q(o)},Q=o=>{T.value.push(o),n.push(o)},W=o=>{n.splice(n.findIndex(e=>e===o),1)};return ee(()=>{b()}),te(function o(e){P.multiple==!1&&e.length>1&&(o=[e.at(-1)])}),(o,e)=>(c(),y(l(we),{as:"template",show:h.openFileManager},{default:w(()=>[r(l(_e),{as:"div",class:"fixed z-[70] inset-0 overflow-y-auto",initialFocus:D.value},{default:w(()=>[t("div",Ce,[r(l(V),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:w(()=>[r(l(xe),{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})]),_:1}),Fe,r(l(V),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:w(()=>[t("div",Me,[m.value?(c(),f("div",$e,Se)):p("",!0),t("div",De,[t("div",Ne,[t("div",Be,[t("div",ze,[r(pe,{buttonclas:"buttonclas"},{openbutton:w(()=>[r(l(ge),{class:"h-4 w-4 lg:h-5 lg:w-5","aria-hidden":"true"})]),default:w(()=>[t("div",je,[t("button",{class:x(["inline-flex w-full px-2 pt-1",[i.value==""?"bg-gray-200 rounded":null]]),onClick:e[0]||(e[0]=s=>M(""))},[r(l(z),{class:"h-5 w-5","aria-hidden":"true"}),se(" Home ")],2),t("div",Ve,[g.directories.length?(c(),y(B,{key:0,directories:g.directories,current:i.value,"onChange:directory":e[1]||(e[1]=s=>M(s))},null,8,["directories","current"])):p("",!0)])])]),_:1}),t("button",{type:"button",class:"inline-flex items-center p-1.5 lg:p-2 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:O,title:"create new folder"},[r(l(fe),{class:"h-4 w-4 lg:h-5 lg:w-5","aria-hidden":"true"})]),t("button",{type:"button",class:x(["inline-flex items-center p-1.5 lg:p-2 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",[i.value==""?"opacity-50 cursor-not-allowed":null]]),title:"remove folder",disabled:i.value=="",onClick:J},[r(l(me),{class:"h-4 w-4 lg:h-5 lg:w-5","aria-hidden":"true"})],10,Pe),t("button",{type:"button",class:"inline-flex items-center p-1.5 lg:p-2 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",title:"upload image(s)",onClick:R,ref_key:"uploadBtn",ref:D},[r(l(ce),{class:"h-4 w-4 lg:h-5 lg:w-5","aria-hidden":"true"})],512),t("button",{type:"button",class:x(["inline-flex items-center p-1.5 lg:p-2 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-md text-white focus:outline-none focus:ring-2 bg-indigo-600 hover:bg-indigo-700 focus:ring-offset-2 focus:ring-indigo-500",[l(n).length?null:"opacity-50 cursor-not-allowed"]]),disabled:!l(n).length,onClick:A,title:"delete image(s)"},[r(l(he),{class:"h-4 w-4 lg:h-5 lg:w-5","aria-hidden":"true"})],10,Ue)]),t("div",Te,[t("div",He,[l(n).length?(c(),f("button",{key:0,type:"button",class:"inline-flex items-center self-center p-1.5 lg:p-2 border-transparent shadow-sm text-sm leading-4 font-medium rounded border text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",onClick:e[2]||(e[2]=s=>l(n).splice(0)),title:"select"},[r(l(j),{class:"mr-1 lg:mr-2 h-4 w-4 lg:h-5 lg:w-5","aria-hidden":"true"}),Oe])):p("",!0),l(n).length?(c(),f("button",{key:1,type:"button",class:"inline-flex items-center self-center p-1.5 lg:p-2 border-transparent shadow-sm text-sm leading-4 font-medium rounded border text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",onClick:e[3]||(e[3]=s=>{H(l(n)),l(n).splice(0)}),title:"select"},[r(l(j),{class:"mr-1 lg:mr-2 h-4 w-4 lg:h-5 lg:w-5","aria-hidden":"true"}),qe])):p("",!0)]),t("button",{type:"button",class:"inline-flex items-center p-1.5 lg:p-2 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",title:"close",onClick:e[4]||(e[4]=s=>{o.$emit("update:openFileManager",!1),l(n).splice(0)})},[r(l(be),{class:x([[l(n).length?"h-12 w-12 ":null],"h-4 w-4 lg:h-5 lg:w-5"]),"aria-hidden":"true"},null,8,["class"])])])])]),t("div",Ae,[t("div",Ee,[t("button",{class:x(["inline-flex items-center w-full px-2 pt-1",[i.value==""?"bg-gray-200 rounded":null]]),onClick:e[5]||(e[5]=s=>M(""))},[r(l(z),{class:"h-5 w-5","aria-hidden":"true"}),Je],2),t("div",Le,[g.directories.length?(c(),y(B,{key:0,directories:g.directories,current:i.value,"onChange:directory":e[6]||(e[6]=s=>M(s))},null,8,["directories","current"])):p("",!0)])])]),t("div",Re,[t("form",{action:"",onSubmit:e[7]||(e[7]=N(()=>{},["prevent"])),class:"p-3 h-96 overflow-y-auto"},[t("div",Ye,[g.files.length?(c(!0),f(ne,{key:0},oe(g.files,s=>(c(),f("div",{class:"col-span-2 h-full overscroll-auto",key:s.name},[t("div",{class:x(["p-2 border-2 rounded relative bg-white transition-all h-full flex cursor-pointer",[$(s.url)?"selected-inner-shadow border-green-500":null]]),onClick:k=>K(s.url)},[$(s.url)?(c(),f("div",Ke,[r(l(ve),{class:"w-6 h-6"})])):p("",!0),$(s.url)?(c(),f("div",Qe,[t("p",We,le(s.name),1)])):p("",!0),t("label",{for:s.name,class:"self-center"},[t("img",{src:s.url,alt:s.name,class:"w-full cursor-pointer"},null,8,Ze)],8,Xe)],10,Ge)]))),128)):(c(),f("div",et,"This folder is empty..."))])],32)])])])]),_:1})]),a.open?(c(),y(ie,{key:0,"open-modal":a.open,"onUpdate:open-modal":e[8]||(e[8]=s=>a.open=s),"onClick:confirm":a.callback,header:a.header,body:a.body,confirm:"Yes , Delete"},null,8,["open-modal","onClick:confirm","header","body"])):p("",!0),u.open?(c(),y(de,{key:1,"open-modal":u.open,"onUpdate:open-modal":e[9]||(e[9]=s=>u.open=s),header:u.header,body:u.body,confirm:u.confirm,"onClick:confirm":e[10]||(e[10]=s=>q(s))},null,8,["open-modal","header","body","confirm"])):p("",!0),t("form",{action:"",onSubmit:e[11]||(e[11]=N(()=>{},["prevent"])),class:"hidden"},[t("input",{type:"file",multiple:"",name:"images",onChange:Y,accept:"image/*",ref_key:"uploadImagesInput",ref:S},null,544)],32),_.open?(c(),y(ue,{key:2,"open-modal":_.open,"onUpdate:open-modal":e[12]||(e[12]=s=>_.open=s),settings:d.settings,"onUpdate:settings":e[13]||(e[13]=s=>d.settings=s),progress:d.progress,"onClick:upload":G,images:d.images},null,8,["open-modal","settings","progress","images"])):p("",!0)]),_:1},8,["initialFocus"])]),_:1},8,["show"]))}},st=ye(tt,[["__scopeId","data-v-49bcbfe2"]]),pt=Object.freeze(Object.defineProperty({__proto__:null,default:st},Symbol.toStringTag,{value:"Module"}));export{st as F,pt as a,ke as u};
