import{ref as S,reactive as U,onMounted as me,watchEffect as pe,mergeProps as ve,withCtx as B,unref as r,createVNode as l,createTextVNode as R,openBlock as m,createBlock as p,createCommentVNode as h,Fragment as be,renderList as he,toDisplayString as we,withModifiers as ye,useSSRContext as xe}from"vue";import{ssrRenderComponent as g,ssrRenderClass as N,ssrIncludeBooleanAttr as q,ssrRenderList as ke,ssrInterpolate as $e,ssrRenderAttr as T}from"vue/server-renderer";import{_ as Ce}from"./AdminLayout.37b53da2.mjs";import{FolderIcon as V,PhotoIcon as P,FolderPlusIcon as E,FolderMinusIcon as G,ArrowUpTrayIcon as K,TrashIcon as Q,CheckCircleIcon as W,ArrowPathIcon as X,CheckIcon as Z}from"@heroicons/vue/24/outline";import z from"./DirectoryNav.e3161542.mjs";import{_ as I}from"./SimpleModal.bea873ea.mjs";import _ from"./DeleteModal.ff36b371.mjs";import ee from"./InputModal.517355de.mjs";import te from"./PreviewModal.65dfd87f.mjs";import{_ as Fe}from"./_plugin-vue_export-helper.43be4956.mjs";import"@inertiajs/inertia";import"@inertiajs/inertia-vue3";import"@vue/reactivity";import"./useDetictingMobile.b2e015eb.mjs";import"./settings.4b7d87d4.mjs";import"pinia";import"./usermenu.66c565d8.mjs";import"@headlessui/vue";import"./Input.c13e1950.mjs";import"./Label.ea13edbe.mjs";import"./InputError.e7dc6eaa.mjs";import"./Select.8e9357d0.mjs";const Y={__name:"Libary",__ssrInlineRender:!0,props:{openFileManager:{type:Boolean,default:!0},multiple:{type:Boolean,default:!0}},setup(H){const L=H,D=S(null),w=S(!0);var d=U([]);const i=S(""),s=U({open:!1,header:"",body:"",callback:null}),u=U({open:!1,header:"",body:"",confirm:""});S(!1);const c=U({images:[],path:"",settings:[],progress:null}),y=U({open:!1}),ne=S(null),f=U({directories:[],files:[]}),oe=o=>{d.includes(o)?ae(o):re(o)},re=o=>{d.push(o)},ae=o=>{d.splice(d.findIndex(a=>a===o),1)};me(()=>{k()});function k(){let o={path:i.value};axios.post(route("laravel-file-manager.setup"),o).then(a=>{f.directories=a.data.directories,f.files=a.data.files.sort(function($,M){return M.time-$.time}),w.value=!1})}function F(o){return d.length?d.includes(o):!1}function x(o){w.value=!0,i.value=o,d.splice(0),k()}function ie(){u.open=!0,u.header="Create New Folder?",u.body=`you are creating new folder in "home/${i.value}".
                      type your new folder name and click the "Create Folder" button.`,u.confirm="Create Folder"}function J(o){w.value=!0,u.open=!1;let a={name:o,path:i.value};axios.post(route("laravel-file-manager.create-folder"),a).then($=>{d.splice(0),k()})}function se(){s.open=!0,s.header="Delete Image(s)?",s.body=`you are deleting ${d.length} image(s). are you sure?`,s.callback=de}function de(){w.value=!0,s.open=!1;let o={images:d};axios.post(route("laravel-file-manager.delete-images"),o).then(a=>{d.splice(0),k()})}function ce(){s.open=!0,s.header="Delete Folder?",s.body=`you are deleting "${i.value}" folder. are you sure?`,s.callback=ue}function ue(){w.value=!0,s.open=!1;let o={folder:i.value};axios.post(route("laravel-file-manager.delete-folder"),o).then(a=>{d.splice(0),i.value="",k()})}function ge(){D.value.click()}function fe(o){let a=o.target.files;if(a.length){let $=[];for(let M=0;M<a.length;M++)$.push({name:null,format:null});c.images=a,c.settings=$,y.open=!0}}function O(){w.value=!0;let o=new FormData;for(let a=0;a<c.images.length;a++)o.append(`images[${a}]`,c.images[a]);o.append("path",i.value),o.append("settings",JSON.stringify(c.settings)),axios.post(route("laravel-file-manager.upload-images"),o,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(a){c.progress={percentage:Math.round(100*a.loaded/a.total)}}}).then(a=>{y.open=!1,d.splice(0),c.images=[],c.path="",c.settings=[],c.progress=null,k()})}return pe(function o(a){L.multiple==!1&&a.length>1&&(o=[a.at(-1)])}),(o,a,$,M)=>{a(g(Ce,ve({title:"Category"},M),{default:B((Me,n,v,e)=>{if(n)n(`<div class="p-6 bg-gray-200 h-screen" data-v-549ede6e${e}><div class="bg-white max-h-screen rounded-lg shadow-lg relative p-4" data-v-549ede6e${e}>`),w.value?n(`<div class="absolute left-0 top-0 w-full h-full z-10" data-v-549ede6e${e}><div class="bg-gray-400 bg-opacity-30 grid content-center justify-center h-full" data-v-549ede6e${e}><div class="inline" data-v-549ede6e${e}><svg class="animate-spin h-7 w-7 text-green-300" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" data-v-549ede6e${e}><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" data-v-549ede6e${e}></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" data-v-549ede6e${e}></path></svg></div></div></div>`):n("<!---->"),n(`<div class="col-span-1 md:col-span-3 lg:col-span-4 sticky" data-v-549ede6e${e}><div class="flex justify-between pb-3 border-b-2" data-v-549ede6e${e}><div class="space-x-2" data-v-549ede6e${e}>`),n(g(I,{buttonclas:"buttonclas"},{openbutton:B((t,b,j,C)=>{if(b)b(g(r(V),{class:"h-4 w-4 lg:h-5 lg:w-5","aria-hidden":"true"},null,j,C));else return[l(r(V),{class:"h-4 w-4 lg:h-5 lg:w-5","aria-hidden":"true"})]}),default:B((t,b,j,C)=>{if(b)b(`<div class="pb-3 lg:pr-3 lg:pb-0 lg:h-full overflow-y-auto" data-v-549ede6e${C}><button class="${N([[i.value==""?"bg-gray-200 rounded":null],"inline-flex w-full px-2 pt-1"])}" data-v-549ede6e${C}>`),b(g(r(P),{class:"h-5 w-5","aria-hidden":"true"},null,j,C)),b(` Home </button><div class="ml-5 mt-1" data-v-549ede6e${C}>`),f.directories.length?b(g(z,{directories:f.directories,current:i.value,"onChange:directory":A=>x(A)},null,j,C)):b("<!---->"),b("</div></div>");else return[l("div",{class:"pb-3 lg:pr-3 lg:pb-0 lg:h-full overflow-y-auto"},[l("button",{class:["inline-flex w-full px-2 pt-1",[i.value==""?"bg-gray-200 rounded":null]],onClick:A=>x("")},[l(r(P),{class:"h-5 w-5","aria-hidden":"true"}),R(" Home ")],10,["onClick"]),l("div",{class:"ml-5 mt-1"},[f.directories.length?(m(),p(z,{key:0,directories:f.directories,current:i.value,"onChange:directory":A=>x(A)},null,8,["directories","current","onChange:directory"])):h("",!0)])])]}),_:1},v,e)),n(`<button type="button" class="inline-flex items-center p-1.5 lg:p-2 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500" title="create new folder" data-v-549ede6e${e}>`),n(g(r(E),{class:"h-4 w-4 lg:h-5 lg:w-5","aria-hidden":"true"},null,v,e)),n(`</button><button type="button" title="remove folder"${q(i.value=="")?" disabled":""} class="${N([[i.value==""?"opacity-50 cursor-not-allowed":null],"inline-flex items-center p-1.5 lg:p-2 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"])}" data-v-549ede6e${e}>`),n(g(r(G),{class:"h-4 w-4 lg:h-5 lg:w-5","aria-hidden":"true"},null,v,e)),n(`</button><button type="button" class="inline-flex items-center p-1.5 lg:p-2 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500" title="upload image(s)" data-v-549ede6e${e}>`),n(g(r(K),{class:"h-4 w-4 lg:h-5 lg:w-5","aria-hidden":"true"},null,v,e)),n(`</button><button type="button"${q(!r(d).length)?" disabled":""} class="${N([[r(d).length?null:"opacity-50 cursor-not-allowed"],"inline-flex items-center p-1.5 lg:p-2 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-md text-white focus:outline-none focus:ring-2 bg-indigo-600 hover:bg-indigo-700 focus:ring-offset-2 focus:ring-indigo-500"])}" title="delete image(s)" data-v-549ede6e${e}>`),n(g(r(Q),{class:"h-4 w-4 lg:h-5 lg:w-5","aria-hidden":"true"},null,v,e)),n(`</button></div><div class="space-x-2 flex" data-v-549ede6e${e}>`),r(d).length?(n(`<button type="button" class="inline-flex items-center self-center p-1.5 lg:p-2 border-transparent shadow-sm text-sm leading-4 font-medium rounded border text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500" title="select" data-v-549ede6e${e}>`),n(g(r(W),{class:"mr-1 lg:mr-2 h-4 w-4 lg:h-5 lg:w-5","aria-hidden":"true"},null,v,e)),n(`<span class="mt-0.5 text-xs lg:text-md pr-1" data-v-549ede6e${e}>Deselect</span></button>`)):n("<!---->"),n(`<button type="button" class="inline-flex items-center p-1.5 lg:p-2 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-md text-gray-400 bg-gray-100 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 focus:text-green-500 focus:bg-green-100" data-v-549ede6e${e}>`),n(g(r(X),{class:"h-4 w-4 lg:h-5 lg:w-5","aria-hidden":"true"},null,v,e)),n(`</button></div></div></div><div class="flex mt-2" data-v-549ede6e${e}><div class="sm:w-2/12 hidden md:block" data-v-549ede6e${e}><div class="pb-3 lg:pr-3 lg:pb-0 lg:h-full overflow-y-auto" data-v-549ede6e${e}><button class="${N([[i.value==""?"bg-gray-200 rounded":null],"inline-flex w-full px-2 pt-1"])}" data-v-549ede6e${e}>`),n(g(r(P),{class:"h-5 w-5","aria-hidden":"true"},null,v,e)),n(` Home </button><div class="ml-5 mt-1" data-v-549ede6e${e}>`),f.directories.length?n(g(z,{directories:f.directories,current:i.value,"onChange:directory":t=>x(t)},null,v,e)):n("<!---->"),n(`</div></div></div><div class="sm:w-10/12" data-v-549ede6e${e}><div class="grid grid-cols-4 sm:grid-cols-12 gap-3 overscroll-x-contain" data-v-549ede6e${e}>`),f.files.length?(n("<!--[-->"),ke(f.files,t=>{n(`<div class="col-span-2 h-full overscroll-auto" data-v-549ede6e${e}><div class="${N([[F(t.url)?"selected-inner-shadow border-green-500":null],"p-2 border-2 rounded relative bg-white transition-all h-full flex cursor-pointer"])}" data-v-549ede6e${e}>`),F(t.url)?(n(`<div class="absolute top-1 right-1 border border-green-500 bg-white text-green-500 rounded-full z-10 cursor-pointer" data-v-549ede6e${e}>`),n(g(r(Z),{class:"w-6 h-6"},null,v,e)),n("</div>")):n("<!---->"),F(t.url)?n(`<div class="absolute top-0 right-0 w-full h-full bg-gray-50 cursor-pointer bg-opacity-50 flex items-center justify-center p-2" data-v-549ede6e${e}><p class="text-xs font-bold break-all text-center" data-v-549ede6e${e}>${$e(t.name)}</p></div>`):n("<!---->"),n(`<label${T("for",t.name)} class="self-center" data-v-549ede6e${e}><img${T("src",t.url)}${T("alt",t.name)} class="w-full cursor-pointer" data-v-549ede6e${e}></label></div></div>`)}),n("<!--]-->")):n(`<div class="col-span-10 p-3" data-v-549ede6e${e}>This folder is empty...</div>`),n("</div></div></div></div></div>"),s.open?n(g(_,{"open-modal":s.open,"onUpdate:open-modal":t=>s.open=t,"onClick:confirm":s.callback,header:s.header,body:s.body,confirm:"Yes , Delete"},null,v,e)):n("<!---->"),u.open?n(g(ee,{"open-modal":u.open,"onUpdate:open-modal":t=>u.open=t,header:u.header,body:u.body,confirm:u.confirm,"onClick:confirm":t=>J(t)},null,v,e)):n("<!---->"),n(`<form action="" class="hidden" data-v-549ede6e${e}><input type="file" multiple name="images" accept="image/*" data-v-549ede6e${e}></form>`),y.open?n(g(te,{"open-modal":y.open,"onUpdate:open-modal":t=>y.open=t,settings:c.settings,"onUpdate:settings":t=>c.settings=t,progress:c.progress,"onClick:upload":O,images:c.images},null,v,e)):n("<!---->");else return[l("div",{class:"p-6 bg-gray-200 h-screen"},[l("div",{class:"bg-white max-h-screen rounded-lg shadow-lg relative p-4"},[w.value?(m(),p("div",{key:0,class:"absolute left-0 top-0 w-full h-full z-10"},[l("div",{class:"bg-gray-400 bg-opacity-30 grid content-center justify-center h-full"},[l("div",{class:"inline"},[(m(),p("svg",{class:"animate-spin h-7 w-7 text-green-300",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[l("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),l("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]))])])])):h("",!0),l("div",{class:"col-span-1 md:col-span-3 lg:col-span-4 sticky"},[l("div",{class:"flex justify-between pb-3 border-b-2"},[l("div",{class:"space-x-2"},[l(I,{buttonclas:"buttonclas"},{openbutton:B(()=>[l(r(V),{class:"h-4 w-4 lg:h-5 lg:w-5","aria-hidden":"true"})]),default:B(()=>[l("div",{class:"pb-3 lg:pr-3 lg:pb-0 lg:h-full overflow-y-auto"},[l("button",{class:["inline-flex w-full px-2 pt-1",[i.value==""?"bg-gray-200 rounded":null]],onClick:t=>x("")},[l(r(P),{class:"h-5 w-5","aria-hidden":"true"}),R(" Home ")],10,["onClick"]),l("div",{class:"ml-5 mt-1"},[f.directories.length?(m(),p(z,{key:0,directories:f.directories,current:i.value,"onChange:directory":t=>x(t)},null,8,["directories","current","onChange:directory"])):h("",!0)])])]),_:1}),l("button",{type:"button",class:"inline-flex items-center p-1.5 lg:p-2 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:ie,title:"create new folder"},[l(r(E),{class:"h-4 w-4 lg:h-5 lg:w-5","aria-hidden":"true"})]),l("button",{type:"button",class:["inline-flex items-center p-1.5 lg:p-2 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",[i.value==""?"opacity-50 cursor-not-allowed":null]],title:"remove folder",disabled:i.value=="",onClick:ce},[l(r(G),{class:"h-4 w-4 lg:h-5 lg:w-5","aria-hidden":"true"})],10,["disabled"]),l("button",{type:"button",class:"inline-flex items-center p-1.5 lg:p-2 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",title:"upload image(s)",onClick:ge,ref_key:"uploadBtn",ref:ne},[l(r(K),{class:"h-4 w-4 lg:h-5 lg:w-5","aria-hidden":"true"})],512),l("button",{type:"button",class:["inline-flex items-center p-1.5 lg:p-2 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-md text-white focus:outline-none focus:ring-2 bg-indigo-600 hover:bg-indigo-700 focus:ring-offset-2 focus:ring-indigo-500",[r(d).length?null:"opacity-50 cursor-not-allowed"]],disabled:!r(d).length,onClick:se,title:"delete image(s)"},[l(r(Q),{class:"h-4 w-4 lg:h-5 lg:w-5","aria-hidden":"true"})],10,["disabled"])]),l("div",{class:"space-x-2 flex"},[r(d).length?(m(),p("button",{key:0,type:"button",class:"inline-flex items-center self-center p-1.5 lg:p-2 border-transparent shadow-sm text-sm leading-4 font-medium rounded border text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",onClick:t=>r(d).splice(0),title:"select"},[l(r(W),{class:"mr-1 lg:mr-2 h-4 w-4 lg:h-5 lg:w-5","aria-hidden":"true"}),l("span",{class:"mt-0.5 text-xs lg:text-md pr-1"},"Deselect")],8,["onClick"])):h("",!0),l("button",{type:"button",class:"inline-flex items-center p-1.5 lg:p-2 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-md text-gray-400 bg-gray-100 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 focus:text-green-500 focus:bg-green-100",onClick:t=>k()},[l(r(X),{class:"h-4 w-4 lg:h-5 lg:w-5","aria-hidden":"true"})],8,["onClick"])])])]),l("div",{class:"flex mt-2"},[l("div",{class:"sm:w-2/12 hidden md:block"},[l("div",{class:"pb-3 lg:pr-3 lg:pb-0 lg:h-full overflow-y-auto"},[l("button",{class:["inline-flex w-full px-2 pt-1",[i.value==""?"bg-gray-200 rounded":null]],onClick:t=>x("")},[l(r(P),{class:"h-5 w-5","aria-hidden":"true"}),R(" Home ")],10,["onClick"]),l("div",{class:"ml-5 mt-1"},[f.directories.length?(m(),p(z,{key:0,directories:f.directories,current:i.value,"onChange:directory":t=>x(t)},null,8,["directories","current","onChange:directory"])):h("",!0)])])]),l("div",{class:"sm:w-10/12"},[l("div",{class:"grid grid-cols-4 sm:grid-cols-12 gap-3 overscroll-x-contain"},[f.files.length?(m(!0),p(be,{key:0},he(f.files,t=>(m(),p("div",{class:"col-span-2 h-full overscroll-auto",key:t.name},[l("div",{class:["p-2 border-2 rounded relative bg-white transition-all h-full flex cursor-pointer",[F(t.url)?"selected-inner-shadow border-green-500":null]],onClick:b=>oe(t.url)},[F(t.url)?(m(),p("div",{key:0,class:"absolute top-1 right-1 border border-green-500 bg-white text-green-500 rounded-full z-10 cursor-pointer"},[l(r(Z),{class:"w-6 h-6"})])):h("",!0),F(t.url)?(m(),p("div",{key:1,class:"absolute top-0 right-0 w-full h-full bg-gray-50 cursor-pointer bg-opacity-50 flex items-center justify-center p-2"},[l("p",{class:"text-xs font-bold break-all text-center"},we(t.name),1)])):h("",!0),l("label",{for:t.name,class:"self-center"},[l("img",{src:t.url,alt:t.name,class:"w-full cursor-pointer"},null,8,["src","alt"])],8,["for"])],10,["onClick"])]))),128)):(m(),p("div",{key:1,class:"col-span-10 p-3"},"This folder is empty..."))])])])])]),s.open?(m(),p(_,{key:0,"open-modal":s.open,"onUpdate:open-modal":t=>s.open=t,"onClick:confirm":s.callback,header:s.header,body:s.body,confirm:"Yes , Delete"},null,8,["open-modal","onUpdate:open-modal","onClick:confirm","header","body"])):h("",!0),u.open?(m(),p(ee,{key:1,"open-modal":u.open,"onUpdate:open-modal":t=>u.open=t,header:u.header,body:u.body,confirm:u.confirm,"onClick:confirm":t=>J(t)},null,8,["open-modal","onUpdate:open-modal","header","body","confirm","onClick:confirm"])):h("",!0),l("form",{action:"",onSubmit:ye(()=>{},["prevent"]),class:"hidden"},[l("input",{type:"file",multiple:"",name:"images",onChange:fe,accept:"image/*",ref_key:"uploadImagesInput",ref:D},null,544)],40,["onSubmit"]),y.open?(m(),p(te,{key:2,"open-modal":y.open,"onUpdate:open-modal":t=>y.open=t,settings:c.settings,"onUpdate:settings":t=>c.settings=t,progress:c.progress,"onClick:upload":O,images:c.images},null,8,["open-modal","onUpdate:open-modal","settings","onUpdate:settings","progress","images"])):h("",!0)]}),_:1},$))}}},le=Y.setup;Y.setup=(H,L)=>{const D=xe();return(D.modules||(D.modules=new Set)).add("resources/js/Pages/Admin/Media/Libary.vue"),le?le(H,L):void 0};const We=Fe(Y,[["__scopeId","data-v-549ede6e"]]);export{We as default};
