import{computed as u,onBeforeMount as ue,onMounted as me,reactive as pe,ref as T,resolveComponent as ce,withCtx as U,createVNode as o,unref as r,isRef as x,openBlock as ve,createBlock as de,createCommentVNode as fe,withDirectives as ge,vModelText as _e,useSSRContext as he}from"vue";import{ssrRenderComponent as m,ssrInterpolate as xe}from"vue/server-renderer";import E from"./postsetting.d5d25aa0.mjs";import we from"@ckeditor/ckeditor5-build-classic";import{u as ye}from"./editor.79190857.mjs";import{storeToRefs as be}from"pinia";import{CloudArrowUpIcon as A}from"@heroicons/vue/24/solid";import{usePage as p}from"@inertiajs/inertia-vue3";import R from"./SetPostSettings.7e9cfade.mjs";import Ce from"mitt";import{U as $e}from"./UploadAdapter.dd9db1de.mjs";import{_ as ke}from"./FrontendLayout.3f163ecd.mjs";import Ve from"@ckeditor/ckeditor5-vue";import"@headlessui/vue";import"./Halfmodal.0728e5ad.mjs";import"@vueuse/shared";import"./menu.37310fbe.mjs";const Te={components:{ckeditor:Ve.component}},z=Object.assign(Te,{__name:"EditArticle",__ssrInlineRender:!0,setup(w){const d=Ce(),c=u(()=>p().props.value.article);u(()=>p().props.value.url);const B=ye(),{editor:j,content:n,excerpt:F,slug:y,visibility:M,status:Ue,allow_comment:P,channels:N,selectedChannels:f,tags:D,selectedTags:g,title:a,featured_image:H,approved_at:K,author:O,keywords:b,meta_title:q,meta_description:G,opengraph_title:J,opengraph_description:L,opengraph_image:Q,opengraph_image_width:W,opengraph_image_height:X,twitter_title:Y,twitter_description:Z,twitter_image:I,twitter_cardtype:ee}=be(B);ue(()=>{j.value=u(()=>p().props.value.editor),ne(c.value)});function te(e){D.value.push(e.id)}function le(e){N.value.push(e.id)}me(()=>{g.value=u(()=>p().props.value.selectedTags),g.value.forEach(te),f.value=u(()=>p().props.value.selectedChannels),f.value.forEach(le)});let C=we;const $=pe({extraPlugins:[oe]});function oe(e){e.plugins.get("FileRepository").createUploadAdapter=h=>new $e(h)}const v=T(!1),k=T(null);function re(){let e=k.value;e.style.height="18px",e.style.height=e.scrollHeight+"px"}d.on("changed",_());function _(){setTimeout(()=>v.value=!0,1e3),setTimeout(()=>v.value=!1,1500)}function ne(e){K.value=e.approved_at,y.value=e.slug,O.value=e.author_relation.id,e.meta.keywords==null?b.value=[]:b.value=e.meta.keywords,a.value=e.title,n.value=e.body,F.value=e.excerpt,y.value=e.slug,g.value=e.selectedTags,f.value=e.selectedChannels,H.value=e.hero_image,M.value=e.visibility,P.value=e.allow_comment,q.value=e.meta.meta_title,G.value=e.meta.meta_description,J.value=e.meta.opengraph_title,L.value=e.meta.opengraph_description,Q.value=e.meta.opengraph_image,W.value=e.meta.opengraph_image_width,X.value=e.meta.opengraph_image_height,Y.value=e.meta.twitter_title,Z.value=e.meta.twitter_description,ee.value=e.meta.twitter_cardtype,I.value=e.meta.twitter_image}return(e,h,ie,ae)=>{const V=ce("ckeditor");h(m(ke,ae,{aside:U((se,t,s,l)=>{if(t)t(m(E,null,null,s,l));else return[o(E)]}),default:U((se,t,s,l)=>{if(t)t(`<div class="fixed z-[10] top-1 right-14 sm:hidden flex"${l}>`),v.value?(t(`<button class="hover:shadow-lg saving rounded-lg m-1 px-4 py-2 flex justify-between items-center w-full"${l}>`),t(m(r(A),{class:"h-6 w-6"},null,s,l)),t(`<span class="px-1"${l}>Saving</span></button>`)):t("<!---->"),t(m(R,null,null,s,l)),t(`</div><div class=""${l}><div${l}><div${l}><textarea placeholder="Title" class="no-scrollbar w-full py-1 overscroll-x-none resize-none border-0 focus:ring-0 font-serif bg-transparent text-[44px] font-semibold px-0 leading-none"${l}>${xe(r(a))}</textarea></div><div${l}>`),t(m(V,{editor:r(C),modelValue:r(n),"onUpdate:modelValue":i=>x(n)?n.value=i:null,onBlur:_,config:$},null,s,l)),t("</div></div></div>");else return[o("div",{class:"fixed z-[10] top-1 right-14 sm:hidden flex"},[v.value?(ve(),de("button",{key:0,class:"hover:shadow-lg saving rounded-lg m-1 px-4 py-2 flex justify-between items-center w-full"},[o(r(A),{class:"h-6 w-6"}),o("span",{class:"px-1"},"Saving")])):fe("",!0),o(R)]),o("div",{class:""},[o("div",null,[o("div",null,[ge(o("textarea",{placeholder:"Title","onUpdate:modelValue":i=>x(a)?a.value=i:null,onInput:i=>re(),ref_key:"textarea",ref:k,class:"no-scrollbar w-full py-1 overscroll-x-none resize-none border-0 focus:ring-0 font-serif bg-transparent text-[44px] font-semibold px-0 leading-none"},null,40,["onUpdate:modelValue","onInput"]),[[_e,r(a)]])]),o("div",null,[o(V,{editor:r(C),modelValue:r(n),"onUpdate:modelValue":i=>x(n)?n.value=i:null,onBlur:_,config:$},null,8,["editor","modelValue","onUpdate:modelValue","config"])])])])]}),_:1},ie))}}}),S=z.setup;z.setup=(w,d)=>{const c=he();return(c.modules||(c.modules=new Set)).add("resources/js/Pages/Article/EditArticle.vue"),S?S(w,d):void 0};export{z as default};
